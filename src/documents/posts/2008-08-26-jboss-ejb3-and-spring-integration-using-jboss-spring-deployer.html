---
layout: "home"
title: "jboss ejb3 and spring integration using jboss-spring deployer"
created: 1219770732
---
<p>jboss ejb3 spring integration using jboss-spring&nbsp;deployer</p> <p>spring deployer download site:<br /><a href="http://sourceforge.net/project/showfiles.php?group_id=22866&amp;package_id=161914">http://sourceforge.net/project/showfiles.php?group_id=22866&amp;package_id=161914</a></p> <p dir="ltr" style="text-align: left;">detailed tutorial:<br /><a href="http://java.sys-con.com/node/180386">http://java.sys-con.com/node/180386</a><br /><a href="http://wiki.jboss.org/wiki/JBossSpringIntegration">http://wiki.jboss.org/wiki/JBossSpringIntegration</a></p> <p>currently there is a distribution for jboss-spring deployer for:</p> <p>jboss-5 + spring 2.5&nbsp;<br />download :<br />jboss-spring-3.1.deployer<br />jboss-spring-3.1.jar</p> <p>jboss-4.x + spring 2.03<br />download:<br />Spring Deployer 1.3 - file name; jboss-spring-version4.zip</p> <p>to have a spring deployer for jboss-4.x and spring 2.0.8 or spring 2.5:</p> <p>download <span lang="en-US">Spring Deployer 1.3 - file name; jboss-spring-version4.zip</span></p> <p>download one of the files under Spring Deployer 2.1 in spring deployer download site:<br />jboss-spring-jdk5-2.0.8.jar<br />or<br />jboss-spring-jdk5-2.5.jar</p> <p>unpack jboss-spring-version4.zip</p> <p dir="ltr" style="text-align: left;">copy jboss-spring-version4/jboss-spring-jdk5.deployer and call it</p> <p dir="ltr" style="text-align: left;">jboss-4.x-spring-2.5-jdk5.deployer</p> <p dir="ltr" style="text-align: left;">under jboss-4.x-spring-2.5-jdk5.deployer delete all jar files.</p> <p dir="ltr" style="text-align: left;">copy <span lang="en-US">jboss-spring-jdk5-2.5.jar</span> to jboss-4.x-spring-2.5-jdk5.deployer</p> <p dir="ltr" style="text-align: left;"><span lang="en-US">copy the spring 2.5 jar to &nbsp;jboss-4.x-spring-2.5-jdk5.deployer</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">jboss-4.x-spring-2.5-jdk5.deployer is your deployer for jboss-4.x and spring 2.5</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">copy this folder to the jboss deploy directory.</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">it looks like that:</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">jboss-4.x-spring-2.5-jdk5.deployer/<br /></span><span lang="en-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boss-spring-jdk5-2.5.jar</span><br /><span lang="en-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	spring.jar</span><br /><span lang="en-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	META-INF/</span><br /><span lang="en-US"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jboss-service.xml</span><br /><span lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MANIFEST.MF</span></p> <p dir="ltr" style="text-align: left;">&nbsp;</p><p dir="ltr" style="text-align: left;"><span lang="en-US">add the spring injection interceptor to the ejb3 interceptor stack;</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">under jboss deploy directory edit ejb3-interceptors-aop.xml</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">add an interceptor:</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">&lt;interceptor&nbsp;class=&quot;org.jboss.spring.interceptor.SpringInjectionInterceptor&quot;/&gt; </span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">bind the interceptor to the domains you want,&nbsp;usually all domains;</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">&lt;bind pointcut=&quot;execution(*-&gt;new(..))&quot;&gt;</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US"> &nbsp;&nbsp;&lt;interceptor-ref name=&quot;org.jboss.spring.interceptor.SpringInjectionInterceptor&quot;/&gt;</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">&lt;/bind&gt; </span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">the deployer is complete.</span></p><p dir="ltr" style="text-align: left;">&nbsp;</p> <p dir="ltr" style="text-align: left;"><span lang="en-US">package your spring app in a jar where the spring application-context.xml is under the META-INF folder and is called jboss-spring.xml,&nbsp;the jar ext should be .spring</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US"> for exp:</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">myapp.spring/<br /></span><span lang="en-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyBean.class</span><br /><span lang="en-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	META-INF/</span><br /><span lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MANIFEST.MF</span><br /><span lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jboss-spring.xml</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">deploy the spring app to the jboss deploy directory.</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">the deployer registers the spring bean factory in JNDI under the name of the spring application, for exp: 'myapp'. TODO:how to control this name?</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">to inject spring beans to ejb3 components:</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">you will need the deployer jar in your build path. in our case jboss-spring-jdk5-2.5.jar</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">add the @Spring annotation to the spring bean declaration in your ejb.</span></p> <p dir="ltr" style="text-align: left;"><span lang="en-US">properties of @Spring:<br />j</span><span lang="en-US">ndiName is the jndi name of the registered spring app.<br />b</span><span lang="en-US">ean is the spring bean's name.</span></p> <p dir="ltr" style="text-align: left;"><span style="font-family: 'Monospace';">public class TempTaskProducerBean implements TempTaskProducer {</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';"> &nbsp;&nbsp;&nbsp;@Spring(jndiName=&quot;myapp&quot;,bean=&quot;testBean&quot;)</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">&nbsp;&nbsp;	private TestSpringBean test</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean = null;</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">&nbsp;</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">&nbsp;&nbsp;	public Test</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean getTest</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean() {</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return testBean;</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">&nbsp;&nbsp;	}</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">&nbsp;&nbsp; public void setTest</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean(Test</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean test</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean) {</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.test</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean = test</span><span lang="en-US" style="font-family: 'Monospace';">Spring</span><span style="font-family: 'Monospace';">Bean;</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">&nbsp;	}</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">}</span></p><p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;">&nbsp;</p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">you can of course deploy as many spring modules as you wish.</span></p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;">&nbsp;</p><p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">TODO:transactions?</span></p><p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;">&nbsp;</p> <p dir="ltr" style="text-align: left; margin-bottom: 0in; margin-top: 0in; margin-right: 0in;"><span style="font-family: 'Monospace';">thats it.</span></p> <p>&nbsp;</p><p>&nbsp;</p>
